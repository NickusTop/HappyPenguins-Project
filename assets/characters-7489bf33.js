import"./styles-f3b11233.js";function T(e,t,s=0,c=20,l=!1){l&&(e.innerHTML="");const a=t.slice(s,s+c),i=a.map(n=>{if(!n)return"";const o=JSON.stringify(n.episode||[]);return`
            <ul class="character-ul"
                data-image="${n.image}"
                data-status="${n.status}"
                data-species="${n.species}"
                data-gender="${n.gender}"
                data-origin="${n.origin.name}"
                data-location="${n.location.name}"
                data-type="${n.type||""}"
                data-episode='${o}'>  <img src="${n.image}" alt="" class="character-img">
                <h2 class="character-h2">${n.name}</h2>
                <p class="character-p">Origin: <span class="character-span">${n.origin.name}</span></p>
                <p class="character-p">Location: <span class="character-span">${n.location.name}</span></p>
            </ul>
            `}).join("");return e.insertAdjacentHTML("beforeend",i),a.length}function G(e,t,s,c,l,a,i,n,o,r){const d=(m,g,S)=>{m.forEach(u=>{u.addEventListener("click",()=>{m.forEach(y=>{y.removeAttribute("name"),y.classList.remove("active")}),o.forEach(y=>y.classList.remove("active"));const p=u.textContent.trim();u.setAttribute("name",p),u.classList.add("active"),S.textContent=p,localStorage.setItem(g,p),r()})})};d(e,"selectedStatus",l),d(t,"selectedSpecies",a),d(s,"selectedType",i),d(c,"selectedGender",n)}function x(){const e=t=>(t||"").toLowerCase();return{selectedStatus:e(localStorage.getItem("selectedStatus")||"All"),selectedSpecies:e(localStorage.getItem("selectedSpecies")||"All"),selectedType:e(localStorage.getItem("selectedType")||"All"),selectedGender:e(localStorage.getItem("selectedGender")||"All"),selectedName:e(localStorage.getItem("selectedName")||""),toLower:e}}function w(e){return function(t){const{selectedStatus:s,selectedSpecies:c,selectedType:l,selectedGender:a,selectedName:i,toLower:n}=e,o=n(t.status),r=n(t.species),d=n(t.type),m=n(t.gender),g=n(t.name);return(s==="all"||o===s)&&(c==="all"||r===c)&&(l==="all"||d===l)&&(a==="all"||m===a)&&(i.length<3||g.includes(i))}}const H="https://rickandmortyapi.com/api/character/";async function E(e){try{const s=await(await fetch(H+`?page=${e}`)).json();return console.log(s),s.results}catch(t){console.log(t)}}async function $(e,t,s,c){let l=s,a=[],i=!0;for(;i&&a.length<t;){let n;try{n=await E(l)}catch{break}if(!n||n.length===0)break;const o=n.filter(e),r=c(o,l),d=t-a.length;a=a.concat(o.slice(0,d)),l++,(r===!1||l>42)&&(i=!1)}return{results:a,finalPage:l}}async function k(e){const{loadMorebtn:t}=e;if(e.pageList>42){t.style.display="none";return}const s=await E(e.pageList);if(!s){t.style.display="none";return}const c=x(),l=w(c),a=s.filter(l);t.style.display=a.length===0?"none":"block"}async function q(e){const{charactersList:t,filteredCharacters:s,loadMorebtn:c,noCharacters:l,countLoad:a}=e;t.innerHTML="",e.nextIndex=0,e.pageList=1,s.length=0;const i=x(),n=w(i),{results:o,finalPage:r}=await $(n,a,e.pageList,()=>!0);e.filteredCharacters=o,e.pageList=r,o.length===0?(c.style.display="none",l.style.display="flex"):(c.style.display="block",l.style.display="none"),T(t,o.slice(0,a),0,a,!0),e.nextIndex=a,await k(e)}async function j(e){const{charactersList:t,loadMorebtn:s,filteredCharacters:c,countLoad:l}=e;s.disabled=!0;const a=x(),i=w(a);let n=0;const{finalPage:o}=await $(i,l,e.pageList,r=>{if(r.length===0)return!0;const d=r.slice(0,l-n);return T(t,d,0,d.length,!1),n+=d.length,e.filteredCharacters=e.filteredCharacters.concat(r),n<l});e.pageList=o,s.disabled=!1,await k(e)}function f(e){return e&&e.replace(/\s*\(.*?\)/g,"").trim()}async function D(e,t){var m,g;const s=t.querySelector(".menu-img"),c=t.querySelector(".menu-status"),l=t.querySelector(".menu-species"),a=t.querySelector(".menu-gender"),i=t.querySelector(".menu-origin"),n=t.querySelector(".menu-location"),o=t.querySelector(".menu-type");t.classList.add("active"),s.src=e.image,c.textContent=f(e.status)||"Unknown",l.textContent=f(e.species)||"Unknown",a.textContent=f(e.gender)||"Unknown",i.textContent=f((m=e.origin)==null?void 0:m.name)||"Unknown",n.textContent=f((g=e.location)==null?void 0:g.name)||"Unknown",o.textContent=f(e.type)||"None";const r=t.querySelector(".menu-container-episodes");if(!r)return;if(r.innerHTML="",!e.episode||e.episode.length===0){r.insertAdjacentHTML("beforeend",'<p class="menu-container-p"></p>');return}const d=e.episode.map(S=>fetch(S).then(u=>u.ok?u.json():null).catch(()=>null));try{const S=await Promise.all(d);for(const u of S){if(!u)continue;const p=u.name,y=u.air_date,F=p.length>7?p.slice(0,7)+"...":p,A=u.episode.match(/S(\d+)E(\d+)/),P=A?A[1]:"??",v=document.createElement("ul");v.classList.add("menu-container-ul","menu-episodes-ul"),v.innerHTML=`
                <h4 class="menu-h4" title="${p}">${F}</h4>
                <li class="menu-container-li menu-container-ep-li">
                    <p class="menu-container-p">Season</p>
                    <span class="menu-container-span">${P}</span>
                </li>
                <li class="menu-container-li">
                    <p class="menu-container-p">Air date</p>
                    <span class="menu-container-span">${y}</span>
                </li>
            `,r.appendChild(v)}}catch{}}const I=document.querySelectorAll(".select-btn"),O=document.querySelectorAll(".select-ul"),M=document.querySelector(".characters-ul"),N=document.querySelector(".loadmore-btn"),h=document.querySelector(".filter-input"),L=document.querySelector(".header-input"),B=document.querySelector(".nocharacters-ul"),b=document.querySelector(".overflow-menu");let J=document.querySelectorAll(".select-ul-status li"),V=document.querySelectorAll(".select-ul-species li"),_=document.querySelectorAll(".select-ul-type li"),z=document.querySelectorAll(".select-ul-gender li"),K=document.querySelector(".status-text"),Q=document.querySelector(".species-text"),R=document.querySelector(".type-text"),W=document.querySelector(".gender-text");const X=b.querySelector(".menu-btn");let C={nextIndex:0,countLoad:20,pageList:1,filteredCharacters:[],charactersList:M,loadMorebtn:N,noCharacters:B};function U(e){let t=e.trim().toLowerCase();t.length<3?localStorage.setItem("selectedName",""):localStorage.setItem("selectedName",t),q(C)}h.addEventListener("input",()=>{U(h.value),L.value=h.value});L.addEventListener("input",()=>{U(L.value),h.value=L.value});M.addEventListener("click",e=>{const t=e.target.closest(".character-ul");if(!t)return;let s=[];try{s=JSON.parse(t.dataset.episode)}catch{}const c={image:t.dataset.image,status:t.dataset.status,species:t.dataset.species,gender:t.dataset.gender,origin:{name:t.dataset.origin},location:{name:t.dataset.location},type:t.dataset.type,episode:s};D(c,b)});X.addEventListener("click",()=>{b.classList.remove("active")});function Y(){I.forEach(e=>{e.addEventListener("click",()=>{let t=e.nextElementSibling;I.forEach(s=>{let c=s.nextElementSibling;c&&c!==t&&c.classList.remove("active")}),t&&t.classList.toggle("active")})})}function Z(){localStorage.setItem("selectedStatus","All"),localStorage.setItem("selectedSpecies","All"),localStorage.setItem("selectedType","All"),localStorage.setItem("selectedGender","All"),Y(),G(J,V,_,z,K,Q,R,W,O,()=>q(C)),N.addEventListener("click",()=>j(C)),q(C)}Z();
